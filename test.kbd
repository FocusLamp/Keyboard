
;; Colemak-DH with Home Row Numbers, Mouse, Extended layers
;; TEST VERSION with Home Row Number Layer

(defcfg 
  process-unmapped-keys yes  ;; Pass-through undefined keys
  concurrent-tap-hold yes    ;; Allows multiple tap-holds simultaneously
  log-layer-changes yes      ;; Layer change logging for debugging
)


(defsrc
  esc  F1   F2   F3   F4   F5   F6   F7   F8   F9   F10  F11  F12                                      prnt slck pause
  grv  1    2    3    4    5    6    7    8    9    0    -    =    bspc                                ins  home pgup  nlck kp/  kp*  kp-
  tab  q    w    e    r    t    y    u    i    o    p    [    ]    \                                   del  end  pgdn  kp7  kp8  kp9  kp+
  caps a    s    d    f    g    h    j    k    l    ;    '    ret                                                      kp4  kp5  kp6
  lsft z    x    c    v    b    n    m    ,    .    /    rsft                                               up         kp1  kp2  kp3  kprt
  lctl lmet lalt           spc            ralt rmet cmp  rctl                                          left down rght  kp0  kp.
)

;; Configuration Variables
(defvar
  ;; Mouse settings
  mouse-interval 1      ;; Mouse movement polling interval
  mouse-accel-time 1000 ;; Time to reach max speed (ms)
  mouse-min-speed 1     ;; Starting mouse speed
  mouse-max-speed 5     ;; Maximum mouse speed
  wheel-interval 50     ;; Scroll wheel interval
  wheel-distance 150    ;; Scroll distance per tick
  
  ;; Timing settings
  tap-timeout 300       ;; Max time for tap recognition (ms)
  hold-timeout 300      ;; Min time for hold recognition (ms)
  capsword-timeout 2000 ;; Auto-disable caps word after (ms)
)

;; Layer and Function Aliases
(defalias
  ;; Layer toggles
  myExtend   (layer-toggle EXTEND)    ;; Navigation and function keys
  myMouse    (layer-toggle mouse)     ;; Mouse controls
  uni-mode   (layer-toggle Unicode)   ;; Unicode/emoji layer
  
  ;; NEW: Home row numbers layer (like macOS)
  symbols    (layer-while-held SYMBOLS)  ;; Hold Right Alt for numbers & symbols
  
  ;; Dual-purpose keys (tap for character, hold for layer)
  walttab    (tap-hold $tap-timeout $hold-timeout z A-tab)      ;; Alt-Tab on z
  waltshftab (tap-hold $tap-timeout $hold-timeout x S-A-tab)    ;; Alt-Shift-Tab on x
  r-mouse    (tap-hold $tap-timeout 350 r @myMouse)
  f-mouse    (tap-hold $tap-timeout 350 f @myMouse)
  h-unicode  (tap-hold $tap-timeout $hold-timeout h @uni-mode)
  m-unicode  (tap-hold $tap-timeout $hold-timeout m @uni-mode)

  ;; NEW: Right Alt tap-hold for symbols layer
  ralt-sym   (tap-hold $tap-timeout $hold-timeout ralt @symbols)
  
  ;; Mouse wheel controls
  mwu (mwheel-up $wheel-interval $wheel-distance)
  mwd (mwheel-down $wheel-interval $wheel-distance)
  mwl (mwheel-left $wheel-interval $wheel-distance)
  mwr (mwheel-right $wheel-interval $wheel-distance)
  
  ;; Precise mouse movement (1px at a time)
  ms‚Üë (movemouse-up $mouse-interval 1)
  ms‚Üê (movemouse-left $mouse-interval 1)
  ms‚Üì (movemouse-down $mouse-interval 1)
  ms‚Üí (movemouse-right $mouse-interval 1)
  
  ;; Accelerated mouse movement
  ma‚Üë (movemouse-accel-up $mouse-interval $mouse-accel-time $mouse-min-speed $mouse-max-speed)
  ma‚Üê (movemouse-accel-left $mouse-interval $mouse-accel-time $mouse-min-speed $mouse-max-speed)
  ma‚Üì (movemouse-accel-down $mouse-interval $mouse-accel-time $mouse-min-speed $mouse-max-speed)
  ma‚Üí (movemouse-accel-right $mouse-interval $mouse-accel-time $mouse-min-speed $mouse-max-speed)
  
  ;; Mouse utilities
  sm  (setmouse 32228 32228)    ;; Center mouse
  fms (movemouse-speed 240)     ;; Fast mouse speed (240%)
  
  ;; Smart features
  cw  (caps-word $capsword-timeout)
  
  ;; Multi-tap actions
  td-esc (tap-dance 200 (esc caps @cw))  ;; 1x=esc, 2x=caps, 3x=caps-word
  td-dot (tap-dance 200 (. S-1 S-/))     ;; 1x=., 2x=!, 3x=?
  td-com (tap-dance 200 (, ; S-;))       ;; 1x=,, 2x=;, 3x=:
  
  ;; Layout switching
  toggle-layout (switch
    ((base-layer QWERTY)) (layer-switch Colemak-DH) break
    ((base-layer Colemak-DH)) (layer-switch QWERTY) break
  )
)

;; Unicode & Text Macros (Kaomoji and Emoji)
(defalias
  ;; Top row kaomoji
  u-q  (macro (clipboard-save 1) (clipboard-set "(‚úø‚ó†‚Äø‚ó†)")      30 C-v (clipboard-restore 1))  ;; Flower girl
  u-w  (macro (clipboard-save 1) (clipboard-set "( „ÅÆv„ÅÆ)")      30 C-v (clipboard-restore 1))  ;; Wise owl
  u-f  (macro (clipboard-save 1) (clipboard-set "( ‚ïØ¬∞‚ñ°¬∞Ôºâ‚ïØÔ∏µ ‚îª‚îÅ‚îª") 30 C-v (clipboard-restore 1))  ;; Flip table
  u-p  (macro (clipboard-save 1) (clipboard-set "‚î¨‚îÄ‚î¨ „Éé( ¬∞‚Äø¬∞„Éé)") 30 C-v (clipboard-restore 1))  ;; Restore table
  u-g  (macro (clipboard-save 1) (clipboard-set "‚òÜ*:.ÔΩ°. o(‚Åé‚âß‚ñΩ‚â¶)o .ÔΩ°.:*‚òÜ") 30 C-v (clipboard-restore 1))  ;; Celebration
  u-j  (macro (clipboard-save 1) (clipboard-set "‚à©(‚óï‚Äø‚óïÔΩ°)‚à©ÔΩû‚ô™")  30 C-v (clipboard-restore 1))  ;; Joyful
  u-l  (macro (clipboard-save 1) (clipboard-set "( Õ°¬∞ Õú ñ Õ°¬∞)")    30 C-v (clipboard-restore 1))  ;; Lenny
  u-u  (macro (clipboard-save 1) (clipboard-set " ï  Õ°¬∞  ñÃØ Õ°¬∞ î")    30 C-v (clipboard-restore 1))  ;; Unhappy
  u-y  (macro (clipboard-save 1) (clipboard-set "·Éö(‡≤†Áõä‡≤† ·Éö)")     30 C-v (clipboard-restore 1))  ;; Confusion
  u-sc (macro (clipboard-save 1) (clipboard-set "( òË®Ä ò‚ï¨)")      30 C-v (clipboard-restore 1))  ;; Shocked
  u-lb (macro (clipboard-save 1) (clipboard-set "„ÉΩ‡ºº‡∫àŸÑÕú‡∫à‡ºΩÔæâ")      30 C-v (clipboard-restore 1))  ;; Donger
  u-rb (macro (clipboard-save 1) (clipboard-set "·ïï( ·êõ )·ïó")      30 C-v (clipboard-restore 1))  ;; Happy

  ;; Home row kaomoji
  u-a  (macro (clipboard-save 1) (clipboard-set "( ‚åê‚ñ†_‚ñ†)=/ÃµÕáÃøÃø/'Ãø'Ãø Ãø ÃøÃø ÃøÃø ÃøÃø") 30 C-v (clipboard-restore 1))  ;; Agent
  u-r  (macro (clipboard-save 1) (clipboard-set "Ôºè(‚Åé‚âß‚àá‚â¶)Ôºº")    30 C-v (clipboard-restore 1))  ;; Rabbit
  u-s  (macro (clipboard-save 1) (clipboard-set "¬Ø\_(„ÉÑ)_/¬Ø")    30 C-v (clipboard-restore 1))  ;; Shrug
  u-t  (macro (clipboard-save 1) (clipboard-set "d( ^‚óá^)b")      30 C-v (clipboard-restore 1))  ;; Thumbs up
  u-d  (macro (clipboard-save 1) (clipboard-set "‚ô™ÔΩû‚îî[‚àµ‚îå]‚îî[ÔΩ•‚ñ•ÔΩ•]‚îò[‚îê‚àµ]‚îòÔΩû‚ô™") 30 C-v (clipboard-restore 1))  ;; Dance
  u-h  (macro (clipboard-save 1) (clipboard-set "(„Å§‚ô° Õú ñ ‚ô°)„Å§")    30 C-v (clipboard-restore 1))  ;; Hug
  u-n  (macro (clipboard-save 1) (clipboard-set "(‡∏á ‡≤†_‡≤†)‡∏á")      30 C-v (clipboard-restore 1))  ;; Nope
  u-e  (macro (clipboard-save 1) (clipboard-set "(‚ÅÑ ‚ÅÑ‚Ä¢‚ÅÑœâ‚ÅÑ‚Ä¢‚ÅÑ ‚ÅÑ)")  30 C-v (clipboard-restore 1))  ;; Embarrassed
  u-i  (macro (clipboard-save 1) (clipboard-set "‡∏Ö(= ò·ÜΩ ò=)‡∏Ö")     30 C-v (clipboard-restore 1))  ;; Cat
  u-o  (macro (clipboard-save 1) (clipboard-set "ŒòœéŒ∏")           30 C-v (clipboard-restore 1))  ;; OwO
  u-qu (macro (clipboard-save 1) (clipboard-set "(Ôæâ*ÔΩ•–¥ÔΩ•)Ôæâ")      30 C-v (clipboard-restore 1))  ;; Sorry
  u-bs (macro (clipboard-save 1) (clipboard-set "„ÉΩ( ‚åío‚åí)‰∫∫(‚åí-‚åí )/") 30 C-v (clipboard-restore 1))  ;; Highfive

  ;; Bottom row kaomoji
  u-z  (macro (clipboard-save 1) (clipboard-set "/‚ï≤/|‚ï≠( Õ°¬∞Õ°¬∞ Õú ñ Õ°¬∞Õ°¬∞)‚ïÆ/|‚ï±\\") 30 C-v (clipboard-restore 1))  ;; Spider
  u-x  (macro (clipboard-save 1) (clipboard-set "‡≠ß(  xÔπèx)‡≠®")    30 C-v (clipboard-restore 1))  ;; RIP
  u-c  (macro (clipboard-save 1) (clipboard-set "( ‡≤•‚ï≠‚ïÆ‡≤•)")      30 C-v (clipboard-restore 1))  ;; Crying
  u-v  (macro (clipboard-save 1) (clipboard-set "( ‡≤∏‚Äø‡≤∏)")        30 C-v (clipboard-restore 1))  ;; Smug
  u-b  (macro (clipboard-save 1) (clipboard-set "‡∏Ö ï ‚Ä¢·¥•‚Ä¢ î‡∏Ö")      30 C-v (clipboard-restore 1))  ;; Bear
  u-k  (macro (clipboard-save 1) (clipboard-set "(=^ÔΩ•œâÔΩ•^=)‰∏ø")   30 C-v (clipboard-restore 1))  ;; Kitty
  u-m  (macro (clipboard-save 1) (clipboard-set "( Õ°‡≤†  ñÃØ Õ°‡≤†)‚ï≠‚à©‚ïÆ")   30 C-v (clipboard-restore 1))  ;; Middle finger
  u-cm (macro (clipboard-save 1) (clipboard-set "(„Å•Ôø£ ¬≥Ôø£)„Å•")    30 C-v (clipboard-restore 1))  ;; Kiss
  u-pd (macro (clipboard-save 1) (clipboard-set "(„Å§_„ÄÉ*)")       30 C-v (clipboard-restore 1))  ;; Facepalm
  u-sl (macro (clipboard-save 1) (clipboard-set "( ‡≤† o ‡≤†) ¬§=(‚Äî‚Äî‚Äî‚Äî") 30 C-v (clipboard-restore 1))  ;; Sword

  ;; Text macros (F1-F4 in Unicode layer)
  hey       (macro (clipboard-save 1) (clipboard-set "Hey! üëã") 30 C-v (clipboard-restore 1))
  complement (macro (clipboard-save 1) (clipboard-set "Nice to see you! Well, this is Splendid!") 30 C-v (clipboard-restore 1))
  thmup     (unicode "üëç")
  hmmm      (unicode "ü§®")
)



;; Layer Definitions

;; Colemak-DH Base Layer
(deflayer Colemak-DH
  @td-esc _    _    _    _    _    _    _    _    _    _    _    _                                     _    _    _
  grv     _    _    _    _    _    _    _    _    _    _    _    _    bspc             @toggle-layout    _    _     _    _    _    _
  tab     q    w    f    p    b    j    l    u    y    ;    [    ]    \                                _    _    _     _    _    _    _
  @myExtend    a    @r-mouse  s    t    g    m    n    e    i   o     '    ret                                         _    _    _
  lsft    @walttab  @waltshftab    c    d    v    k    h    ,    .    /    rsft                                            _          _    _    _    _
  lctl    lmet    lalt          spc          @ralt-sym    rmet    menu    rctl                              _    _    _     _    _
)

;; QWERTY Layer - Alternative Layout
(deflayer QWERTY
  esc  F1    F2    F3    F4    F5    F6    F7    F8    F9    F10   F11   F12                           prnt slck pause
  grv  1     2     3     4     5     6     7     8     9     0     -     =     bspc   @toggle-layout    home pgup  nlck kp/  kp*  kp-
  tab  q     w     e     r     t     y     u     i     o     p     [     ]     \                       del  end  pgdn  kp7  kp8  kp9  kp+
  @myExtend  a     s     d     f     g     h     j     k     l     ;     '     ret                                     kp4  kp5  kp6
  lsft z     x     c     v     b     n     m     ,     .     /     rsft                                     up         kp1  kp2  kp3  kprt
  lctl lmet lalt           spc            @ralt-sym    rmet   menu  rctl                                    left down rght  kp0  kp.
)


;; EXTEND Layer - Navigation & Function Keys
(deflayer EXTEND
  caps ‚ñ∂‚è∏   ‚óÄ‚óÄ     ‚ñ∂‚ñ∂   üîá     üîâ     üîä    üîÜ     üîÖ    _      hmpg  mail  _               _    _    _
  _    F1    F2    F3    F4     F5     F6     F7     F8    F9     F10   F11   F12    _                 _    _    _     _    _    _    _
  _    esc   @myMouse    mbck   mfwd   @mwu   pgup   home   up    end   del   esc   ins    _           _    _    _     _    _    _    _
  _    lalt  lmet  lsft  lctl   @mwd   pgdn   left   down  rght   bspc  menu  prnt                                     _    _    _
  _    C-z   C-x   C-c   mlft   C-v    mmid   mrgt   bck   fwd    _     @uni-mode                           _          _    _    _    _
  _    _    _              ret            _    _    _    _                                             _    _    _     _    _
)

;; NEW: SYMBOLS Layer - Home Row Numbers (macOS style)
;; Hold Right Alt to access this layer
(deflayer SYMBOLS
  _    _     _     _      _      _      _       _    _    _    _     _    _                            _    _    _
  _    _     _     _      _      _      _       _    _    _    _     _    _     _                      _    _    _     _    _    _    _
  S--  S-1   S-2   S-3    S-4    S-5    S-6     S-7  S-8  S-9  S-0   -    _     -                      _    _    _     _    _    _    _
  _    1     2     3      4      5      6       7    8    9    0     grv  ret                                           _    _    _
  S-=  S-,   S-.   S-/    [      ]      S-[     S-]  ,    .    /     _                                      _          _    _    _    _
  _    _     _             spc            _       _    _    _                                            _    _    _     _    _
)

;; Unicode Layer
(deflayer Unicode
  _   XX   XX   XX   XX   XX   XX   XX   XX   XX   XX   XX   XX                                        XX   XX   XX
  XX  @hey @complement  @thmup   @hmmm   XX   XX   XX   XX   XX   XX   XX   XX   XX                    XX   XX   XX   XX   XX   XX   XX
  _   @u-q @u-w @u-f @u-p @u-g @u-j @u-l @u-u @u-y @u-sc @u-lb @u-rb @u-bs                             XX   XX   XX   XX   XX   XX   XX
  _   @u-a @u-r @u-s @u-t @u-d @u-h @u-n @u-e @u-i @u-o @u-qu XX                                                      XX   XX   XX      
  _   @u-z @u-x @u-c @u-v @u-b @u-k @u-m @u-cm @u-pd @u-sl XX                                               XX        XX   XX   XX   XX
  _    _    _              spc             _    _    _    _                                            XX   XX   XX   XX   XX                    
)



;; Mouse Layer - Precision and Accelerated Control
(deflayer mouse
  _    XX    XX    XX    XX    XX    XX    XX    XX    XX    XX    XX    XX                            XX    XX    XX
  XX   XX    XX    XX    XX    XX    @ma‚Üë  XX    XX    pgup  @mwu  pgdn  lctl    XX                   XX    XX    XX     XX   XX   XX   XX
  _    XX    XX    XX    XX    @ma‚Üê  @ma‚Üì  @ma‚Üí  @ms‚Üë  @mwl  @mwd  @mwr  XX    XX                  XX    XX    XX     XX   XX   XX   XX
  _    XX    XX    @fms  XX    @fms  @sm   @ms‚Üê  @ms‚Üì  @ms‚Üí  XX    XX    XX                                            XX   XX   XX
  _    XX    XX    XX    mlft  mmid  mrgt   XX    mbck   mfwd   XX    _                                     XX            XX   XX   XX   XX
  _    _    _              spc             _    _    _    _                                            XX   XX   XX       XX   XX
)


;; Media Layer - Multimedia & System Controls
;;(deflayer media
;;  _    _    _    _    _    _    _    _    _    _    _    _    _                                        _    _    _
;;  _    _    _    _    _    _    _    _    _    _    _    _    _    _                                   _    _    _     _    _    _    _
;;  _    _    _    _    _    brup  volu   mute     @ma‚Üë          wkup   _    _    hmpg    _              _    _    _     _    _    _    _
;;  _    _    _    _    _    brdn  vold  @ma‚Üê   @ma‚Üì   @ma‚Üí     _    _    _                                              _    _    _
;;  _    _    _    _    _    _     _      _      prev   pp    next    _                                       _          _    _    _    _
;;  _    _    _              _              _    _    _    _                                             _    _    _     _    _
;;)
